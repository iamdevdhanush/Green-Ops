<!DOCTYPE html>
<html>
<head>
    <title>GreenOps Admin Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f6f8;
            padding: 30px;
            color: #1f2933;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .badge {
            background: #22c55e;
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 25px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }

        .card h2 {
            margin: 0;
            font-size: 26px;
        }

        .card p {
            margin: 5px 0 0;
            color: #475569;
        }

        .bar-container {
            background: #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 10px;
        }

        .bar {
            height: 14px;
            background: #16a34a;
            width: {{ (used / 5000) * 100 }}%;
        }

        table {
            margin-top: 30px;
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb;
            text-align: left;
        }

        th {
            background: #f1f5f9;
        }

	.subtitle {
    margin-top: -8px;
    color: #94a3b8;
    font-size: 14px;
}

.section {
    margin-top: 30px;
}

.highlight {
    border-left: 6px solid #22c55e;
}

.muted {
    color: #64748b;
    font-size: 14px;
}

.remaining {
    margin-top: 10px;
}

.actions {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.btn {
    padding: 10px 18px;
    background: #2563eb;
    color: white;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 500;
}

.btn:hover {
    background: #1d4ed8;
}

.table-container {
    margin-top: 30px;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.tag {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
}

.tag.sleep {
    background: #dcfce7;
    color: #166534;
}

.tag.active {
    background: #e5e7eb;
    color: #374151;
}

    </style>
</head>

<body>

<div class="header">
    <div>
        <h1>GreenOps</h1>
        <p class="subtitle">Carbon Governance Dashboard</p>
    </div>
    <div class="badge">DEMO MODE</div>
</div>

<!-- KPI CARDS -->
<div class="cards">
    <div class="card highlight">
        <h2>{{ optimized }}</h2>
        <p>Systems Optimized</p>
    </div>

    <div class="card">
        <h2>{{ active }}</h2>
        <p>Systems Active</p>
    </div>

    <div class="card">
        <h2>{{ energy }} kWh</h2>
        <p>Energy Estimated</p>
    </div>

    <div class="card">
        <h2>{{ co2 }} kg</h2>
        <p>CO₂ Emissions</p>
    </div>
</div>

<!-- CARBON BUDGET -->
<div class="card section">
    <h3>Carbon Budget Status</h3>
    <p class="muted">{{ used }} kg used out of 5000 kg monthly budget</p>

    <div class="bar-container">
        <div class="bar"></div>
    </div>

    <p class="remaining">
        Remaining Budget: <strong>{{ remaining }} kg</strong>
    </p>
</div>

<!-- ACTIONS -->
<div class="card section actions">
    <h3>Actions</h3>
    <a href="/export/csv" class="btn">
        Download CSV Report
    </a>
</div>

<!-- TABLE -->
<div class="table-container">
    <h3>Recent System Activity</h3>
    <table>
        <tr>
            <th>System</th>
            <th>Idle Time</th>
            <th>Action</th>
            <th>Reason</th>
        </tr>
        {% for log in logs %}
        <tr>
            <td>{{ log.pc_id }}</td>
            <td>{{ log.idle_minutes }} min</td>
            <td>
                <span class="tag {% if log.action == 'SLEEP' %}sleep{% else %}active{% endif %}">
                    {{ log.action }}
                </span>
            </td>
            <td>
                {% if log.action == "SLEEP" %}
                    Idle exceeded policy threshold
                {% else %}
                    Within allowed activity window
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    <div class="card highlight">
    <h2>₹ {{ money_saved }}</h2>
    <p>Estimated Cost Saved</p>
</div>

</div>

</body>

</html>

